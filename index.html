<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  
  <!-- Favicon -->
<link rel="shortcut icon" href="assets/ico.ico" type="image/x-icon">
<link rel="icon" href="assets/ico.ico" type="image/x-icon">

  <title>80 –ª–µ—Ç –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –ë–µ–ª–∞—Ä—É—Å–∏ ‚Äî –ü–∞–º—è—Ç—å –∏ –ü–æ–±–µ–¥–∞</title>
  <meta name="description" content="–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–∞—Ä—Ç–∞ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –ë–µ–ª–∞—Ä—É—Å–∏, –ª–µ–Ω—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏, –≥–æ–ª–æ—Å–∞ –æ—á–µ–≤–∏–¥—Ü–µ–≤, –∞—Ä—Ö–∏–≤ –∏ –∫–≤–∏–∑—ã." />

  <!-- Leaflet (–∫–∞—Ä—Ç–∞) -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    
    crossorigin=""
  />
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    
    crossorigin=""
  ></script>

  <link rel="stylesheet" href="styles.css" />


<script type="text/javascript" src="https://vk.com/js/api/openapi.js?169"></script>
<script>
  VK.init({ apiId: 54273828, onlyWidgets: true });
</script>

<style>
  /* –ë–∞–∑–æ–≤—ã–π —Å—Ç–∏–ª—å –∫–∞—Ä—Ç—ã */
  #leafletMap {
    width: 100%;
    height: 500px;
    position: relative;
    transition: all 0.4s ease-in-out; /* –ø–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ */
  }

  /* –ö–Ω–æ–ø–∫–∞ –≤ —É–≥–ª—É */
  .map-fullscreen-btn {
    position: absolute;
    top: 10px;
    right: 10px;
    z-index: 1000;
    background: white;
    border: 1px solid #ccc;
    padding: 6px 8px;
    cursor: pointer;
    border-radius: 4px;
    font-size: 16px;
    transition: background 0.2s;
  }
  .map-fullscreen-btn:hover {
    background: #f0f0f0;
  }

  /* –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º */
  .fullscreen {
    position: fixed !important;
    top: 0;
    left: 0;
    width: 100% !important;
    height: 100% !important;
    z-index: 2000 !important;
  }
</style>
  
</head>
<body>
<header class="site-header" role="banner">
  <a class="skip-link" href="#main">–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –∫ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É</a>
  <div class="brand">
    <img src="assets/logo1.png" alt="" aria-hidden="true" />
    <h1>80 –ª–µ—Ç –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –ë–µ–ª–∞—Ä—É—Å–∏</h1>
    <p class="subtitle">–ü–∞–º—è—Ç—å. –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å. –ï–¥–∏–Ω—Å—Ç–≤–æ.</p>
  </div>
  <nav class="main-nav" aria-label="–û—Å–Ω–æ–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è">
    <ul>
      <li><a href="#map">–ö–∞—Ä—Ç–∞</a></li>
  <!--    <li><a href="#timeline">–õ–µ–Ω—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏</a></li> -->
      <li><a href="#voices">–í–∏–¥–µ–æ–∞—Ä—Ö–∏–≤</a></li>
      <li><a href="#archive">–ê—Ä—Ö–∏–≤</a></li>
      <li><a href="#quiz">–ö–≤–∏–∑—ã</a></li>
      <li><a href="#wall">–°—Ç–µ–Ω–∞ –ø–∞–º—è—Ç–∏</a></li>
    </ul>
  </nav>
</header>

<!--
<section class="video-strip">
  <div class="video-container">
    <video autoplay muted loop playsinline>
      <source src="assets/video/1.mp4" type="video/mp4">
      –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∏–¥–µ–æ.
    </video>
    <div class="video-overlay">
<div class="video-dots"></div>
-->



  <section class="video-strip">
  <div class="video-container">
    <video id="bgVideo" autoplay muted loop playsinline>
      <source type="video/mp4">
      –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∏–¥–µ–æ.
    </video>
    <div class="video-overlay">
      <div class="video-dots"></div>

<script>
  // –ø–µ—Ä–µ—á–∏—Å–ª—è–µ–º –≤—Å–µ –≤–∏–¥–µ–æ, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–∞–ª—å–Ω–æ –ª–µ–∂–∞—Ç –≤ assets/video/
  const videos = [
    "1.mp4",
    "2.mp4",
    "3.mp4"
//    "4.mp4"
  ];

  const randomVideo = videos[Math.floor(Math.random() * videos.length)];
  const videoEl = document.getElementById("bgVideo");
  videoEl.querySelector("source").src = `assets/video/${randomVideo}`;
  videoEl.load();
</script>



  
  

       <!-- –ì–µ—Ä–æ–π-–±–ª–æ–∫ -->
  <section class="hero" aria-label="–í—Å—Ç—É–ø–ª–µ–Ω–∏–µ">
    <div class="hero-content">
      <h2>–û—Ç –ø–∞–º—è—Ç–∏ –∫ –ø–æ–Ω–∏–º–∞–Ω–∏—é</h2>
      <p>–ò—Å—Å–ª–µ–¥—É–π—Ç–µ –ø—É—Ç—å –∫ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—é, —Å–ª—É—à–∞–π—Ç–µ –≥–æ–ª–æ—Å–∞ –æ—á–µ–≤–∏–¥—Ü–µ–≤ –∏ –¥–µ–ª–∏—Ç–µ—Å—å —Å–≤–æ–µ–π —Å–µ–º–µ–π–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–µ–π.</p>
      <div class="cta">
        <a href="#map" class="btn primary">–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –∫–∞—Ä—Ç—É</a>
        <a href="#voices" class="btn">–°–º–æ—Ç—Ä–µ—Ç—å –≤–∏–¥–µ–æ</a>
      </div>
    </div>
    <div class="hero-stats" aria-label="–ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–∫—Ç—ã">
      <div><strong>1944</strong><span>–ú–∏–Ω—Å–∫ –æ—Å–≤–æ–±–æ–∂–¥—ë–Ω 3 –∏—é–ª—è</span></div>
      <div><strong>80</strong><span>–ª–µ—Ç –ø–∞–º—è—Ç–∏ –∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏</span></div>
      <div><strong>100+</strong><span>—Å–æ–±—ã—Ç–∏–π –Ω–∞ –∫–∞—Ä—Ç–µ</span></div>
    </div>
  </section>

      
    </div>
    
  </div>
</section>




  
<main id="main">
 

  <!-- –ö–∞—Ä—Ç–∞ -->
  <section id="map" class="section">
    <header>
      <h2>–ö–∞—Ä—Ç–∞ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è</h2>
      <p>–ü–µ—Ä–µ–º–µ—â–∞–π—Ç–µ—Å—å –ø–æ –∫–∞—Ä—Ç–µ, –≤—ã–±–∏—Ä–∞–π—Ç–µ —Å–æ–±—ã—Ç–∏—è –∏ –∏–∑—É—á–∞–π—Ç–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã.</p>
    </header>
    <div class="map-toolbar" role="region" aria-label="–§–∏–ª—å—Ç—Ä—ã –∫–∞—Ä—Ç—ã">
<div class="range-wrapper">
  <label for="yearRange">–ü–µ—Ä–∏–æ–¥ (1943/1944):</label>
  <div class="range-labels" id="yearLabels"></div>
  <input type="range" min="1943" max="1944" step="1" value="1944" id="yearRange" aria-label="–ì–æ–¥" style="width:400px;"/>
</div>

      <fieldset>
        <legend>–°–ª–æ–∏</legend>
        <label><input type="checkbox" checked data-layer="fronts" /> –û–ø–µ—Ä–∞—Ü–∏–∏</label>
        <label><input type="checkbox" checked data-layer="partisans" /> –ü–∞—Ä—Ç–∏–∑–∞–Ω—ã</label>
        <label><input type="checkbox" checked data-layer="cities" /> –ì–æ—Ä–æ–¥–∞</label>
      </fieldset>
      <input type="search" id="mapSearch" placeholder="–ü–æ–∏—Å–∫ —Å–æ–±—ã—Ç–∏—è –∏–ª–∏ –º–µ—Å—Ç–∞" aria-label="–ü–æ–∏—Å–∫ –Ω–∞ –∫–∞—Ä—Ç–µ" />
    </div>
<div id="leafletMap" class="map" role="application" aria-label="–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–∞—Ä—Ç–∞">
  <button id="fullscreenBtn" class="map-fullscreen-btn">‚õ∂</button>
  <div class="map-overlay-bar">–ü–µ—Ä–µ–º–µ—â–∞–π—Ç–µ—Å—å –ø–æ –∫–∞—Ä—Ç–µ, –≤—ã–±–∏—Ä–∞–π—Ç–µ —Å–æ–±—ã—Ç–∏—è –∏ –∏–∑—É—á–∞–π—Ç–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã</div>
</div>

    <div id="mapSidebar" class="map-sidebar" aria-live="polite"></div>
  </section>


  






  <!-- –õ–µ–Ω—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏ 
  <section id="timeline" class="section">
    <header>
      <h2>–õ–µ–Ω—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏</h2>
      <p>–ö–ª—é—á–µ–≤—ã–µ —ç—Ç–∞–ø—ã –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –∏ –ü–æ–±–µ–¥—ã.</p>
    </header>
    <div class="timeline-controls">
      <button class="btn" data-period="all">–í—Å–µ –≥–æ–¥—ã</button>
      <button class="btn" data-period="1941-1942">1941‚Äì1942</button>
      <button class="btn" data-period="1943">1943</button>
      <button class="btn" data-period="1944">1944</button>
      <button class="btn" data-period="1945">1945</button>
    </div>
    <div id="timelineGrid" class="timeline-grid" role="list"></div>
  </section>

-->













  
  <!-- –í–∏–¥–µ–æ–∞—Ä—Ö–∏–≤ -->
  <section id="voices" class="section">
    <header>
      <h2>–í–∏–¥–µ–æ–∞—Ä—Ö–∏–≤</h2>
      <p>–í —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ —Å–æ–±—Ä–∞–Ω—ã —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –≤–∏–¥–µ–æ–º–∞—Ç–µ—Ä–∏–∞–ª—ã, –ø–æ—Å–≤—è—â—ë–Ω–Ω—ã–µ 80‚Äë–ª–µ—Ç–∏—é –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –ë–µ–ª–∞—Ä—É—Å–∏ –æ—Ç –Ω–µ–º–µ—Ü–∫–æ‚Äë—Ñ–∞—à–∏—Å—Ç—Å–∫–∏—Ö –∑–∞—Ö–≤–∞—Ç—á–∏–∫–æ–≤. –ó–¥–µ—Å—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ —Ö—Ä–æ–Ω–∏–∫–∏ –≤–æ–µ–Ω–Ω—ã—Ö –ª–µ—Ç, –∑–∞–ø–∏—Å–∏ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π –≤–µ—Ç–µ—Ä–∞–Ω–æ–≤ –∏ –æ—á–µ–≤–∏–¥—Ü–µ–≤, —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∏–ª—å–º—ã –∏ —Ä–µ–ø–æ—Ä—Ç–∞–∂–∏ –æ –ø–∞–º—è—Ç–Ω—ã—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è—Ö.

–í–∏–¥–µ–æ–∞—Ä—Ö–∏–≤ –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–µ —Ç–æ–ª—å–∫–æ —É–≤–∏–¥–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –∫–∞–¥—Ä—ã, –Ω–æ –∏ –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å –∞—Ç–º–æ—Å—Ñ–µ—Ä—É –≤—Ä–µ–º–µ–Ω–∏, —É—Å–ª—ã—à–∞—Ç—å –∂–∏–≤—ã–µ –≥–æ–ª–æ—Å–∞ —Å–≤–∏–¥–µ—Ç–µ–ª–µ–π –∏ –ø–æ–Ω—è—Ç—å, –∫–∞–∫–æ–π —Ü–µ–Ω–æ–π –±—ã–ª–∞ –∑–∞–≤–æ—ë–≤–∞–Ω–∞ —Å–≤–æ–±–æ–¥–∞. –≠—Ç–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –ø–∞–º—è—Ç–∏ –∏ —É–≤–∞–∂–µ–Ω–∏—è, –≥–¥–µ –ø—Ä–æ—à–ª–æ–µ –æ–∂–∏–≤–∞–µ—Ç, —á—Ç–æ–±—ã –Ω–∞–ø–æ–º–∏–Ω–∞—Ç—å –æ –∑–Ω–∞—á–µ–Ω–∏–∏ –ü–æ–±–µ–¥—ã –∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥ –±—É–¥—É—â–∏–º–∏ –ø–æ–∫–æ–ª–µ–Ω–∏—è–º–∏.</p>
    </header>
    <div class="voices-list" role="list" id="voicesList"></div>
<dialog id="voiceDialog" aria-label="–ü—Ä–æ–∏–≥—Ä—ã–≤–∞—Ç–µ–ª—å –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π">
  <article>
    <button class="close" aria-label="–ó–∞–∫—Ä—ã—Ç—å">&times;</button>
    <h3 id="voiceTitle"></h3>
    <div class="video-wrapper">
      <iframe id="voiceVideo" width="560" height="315" 
              frameborder="0" allowfullscreen></iframe>
    </div>
    <details>
      <summary>–¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç</summary>
      <div id="voiceTranscript"></div>
    </details>
  </article>
</dialog>

    <div class="voices-list" role="list" id="voicesList"></div>
<div class="voices-actions">
  <button id="toggleVoices" class="btn">–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ</button>
</div>

  </section>


<!-- –ê—Ä—Ö–∏–≤ -->
<section id="archive" class="section">
  <header>
    <h2>–ê—Ä—Ö–∏–≤</h2>
    <p>–î–æ–∫—É–º–µ–Ω—Ç—ã, –ø–∏—Å—å–º–∞, —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∏ –∞—Ñ–∏—à–∏.</p>
  </header>

<div class="archive-grid" id="archiveGrid" role="list"></div>
<button id="toggleArchiveBtn" class="archive-toggle-btn hidden">–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ</button>


</section>








<!-- –û–≤–µ—Ä–ª–µ–π –¥–ª—è —Ä–∞—Å–∫—Ä—ã—Ç–æ–≥–æ –∞—Ä—Ö–∏–≤–∞ -->
<div id="archiveOverlay" class="overlay hidden">
  <div class="overlay-content">
    <button id="closeArchiveOverlay" class="close-btn">&times;</button>
    <figure>
      <img id="overlayImage" src="" alt="">
      <figcaption id="overlayCaption"></figcaption>
    </figure>
  </div>
</div>




  

  


  <!-- –ö–≤–∏–∑—ã -->
  <section id="quiz" class="section">
    <header>
      <h2>–ö–≤–∏–∑—ã</h2>
      <p>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤–æ—ë –∑–Ω–∞–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –Ω–æ–≤—ã–µ —Ñ–∞–∫—Ç—ã.</p>
    </header>
    <div class="quiz-card">
      <div id="quizQuestion" class="quiz-question" aria-live="polite"></div>
      <div id="quizAnswers" class="quiz-answers"></div>
      <button id="nextQuestion" class="btn" disabled>–î–∞–ª—å—à–µ</button>
      <div id="quizProgress" class="quiz-progress" aria-live="polite"></div>
    </div>
  </section>






<!-- –°—Ç–µ–Ω–∞ –ø–∞–º—è—Ç–∏ -->
<section id="wall" class="section">

  <h2>–°—Ç–µ–Ω–∞ –ø–∞–º—è—Ç–∏</h2>
  <p class="wall-description">
    ¬´–°—Ç–µ–Ω–∞ –ø–∞–º—è—Ç–∏¬ª —Å–æ–∑–¥–∞–Ω–∞ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–æ—Ä–æ–≥–∏–µ —Å–µ—Ä–¥—Ü—É –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è.  
    –ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è –∏—Å—Ç–æ—Ä–∏–µ–π, —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–µ–π –∏–ª–∏ –≤–∞–∂–Ω—ã–º –º–æ–º–µ–Ω—Ç–æ–º –∏–∑ –∂–∏–∑–Ω–∏  
    —Å–≤–æ–∏—Ö —Ä–æ–¥–Ω—ã—Ö –∏ –±–ª–∏–∑–∫–∏—Ö ‚Äî —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –í–µ–ª–∏–∫–æ–π –û—Ç–µ—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –≤–æ–π–Ω—ã.  
  </p>


  <ul class="wall-instructions">
    <li><strong>–§–ò–û</strong> ‚Äî —É–∫–∞–∂–∏—Ç–µ —Å–≤–æ—ë –∏–º—è –∏–ª–∏ –∏–º—è —á–µ–ª–æ–≤–µ–∫–∞, –æ –∫–æ—Ç–æ—Ä–æ–º –∏–¥—ë—Ç –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–µ.</li>
    <li><strong>–ù–∞–∑–≤–∞–Ω–∏–µ</strong> ‚Äî –¥–∞–π—Ç–µ –∫–æ—Ä–æ—Ç–∫–∏–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≤–∞—à–µ–π –∑–∞–ø–∏—Å–∏.</li>
    <li><strong>–¢–µ–∫—Å—Ç –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è</strong> ‚Äî –Ω–∞–ø–∏—à–∏—Ç–µ —Å–∞–º—É –∏—Å—Ç–æ—Ä–∏—é.  
        –í—Å–µ –ø—Ä–æ–±–µ–ª—ã, –æ—Ç—Å—Ç—É–ø—ã –∏ –ø–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è.</li>
    <li><strong>–°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–æ—Ç–æ</strong> ‚Äî –¥–æ–±–∞–≤—å—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (–ø–æ –∂–µ–ª–∞–Ω–∏—é).</li>
  </ul>
  <p class="wall-note">
    –ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø–∏—Å—å –ø–æ–ø–∞–¥—ë—Ç –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é, –∞ –∑–∞—Ç–µ–º –ø–æ—è–≤–∏—Ç—Å—è –Ω–∞ —Å—Ç–µ–Ω–µ.
  </p>

  <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –ø–æ–∫–∞–∑–∞ —Ñ–æ—Ä–º—ã -->
  <button id="showFormBtn" class="explore-btn">–ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É</button>

  <!-- –§–æ—Ä–º–∞ (—Å–∫—Ä—ã—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) -->
  <form id="wallForm" class="wall-form hidden" novalidate>
    <input type="text" id="fullName" placeholder="–§–ò–û" required>
    <input type="text" id="title" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" required>
    <textarea id="text" placeholder="–¢–µ–∫—Å—Ç –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è" required></textarea>
    <input type="url" id="photo" placeholder="–°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–æ—Ç–æ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)">
    <button type="submit" class="explore-btn">–î–æ–±–∞–≤–∏—Ç—å</button>
  </form>

  <!-- Toast -->
  <div id="toast"></div>

  <hr>
 <!-- –ü–æ–ª–µ –ø–æ–∏—Å–∫–∞ (–º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ) -->
  <input type="text" id="searchInput" class="wall-search" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ—Å—Ç–∞ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏–ª–∏ —Ç–µ–∫—Å—Ç—É...">
  
  <!-- –°–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–æ–≤ -->
  <div id="wallList" class="posts-grid"></div>
  <button id="togglePostsBtn" class="explore-btn hidden">–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ</button>

  <!-- –†–∞—Å–∫—Ä—ã—Ç—ã–π –ø–æ—Å—Ç -->
  <div id="expandedOverlay" class="overlay hidden">
    <div id="expandedPost" class="expanded-post"></div>
  </div>


<script src="app.data.js"></script>
<script src="app.js"></script>
    
  <script>
  const POSTS_URL = "/api/get-posts";
  const API_URL   = "/api/update-posts";
  let postsData = [];
  let showAll = false; // —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–∫–∏
  let searchQuery = ""; // –¥–æ–±–∞–≤–ª–µ–Ω–æ: —Å—Ç—Ä–æ–∫–∞ –ø–æ–∏—Å–∫–∞

  async function loadPosts() {
    try {
      const res = await fetch(POSTS_URL);
      postsData = await res.json();
      renderApproved();
    } catch (err) {
      console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:", err);
      showToast("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö", "error");
    }
  }

  // –ö–Ω–æ–ø–∫–∞ "–ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É"
  const showFormBtn = document.getElementById("showFormBtn");
  const wallForm = document.getElementById("wallForm");

  showFormBtn.addEventListener("click", () => {
    showFormBtn.classList.add("hidden");   // —Å–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É
    wallForm.classList.remove("hidden");   // –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É
  });

  function renderApproved() {
    let approved = postsData
      .map((p, i) => ({...p, _idx: i}))
      .filter(p => p.status === 'approved')
      .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));

    // –¥–æ–±–∞–≤–ª–µ–Ω–æ: —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø–æ–∏—Å–∫—É –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏ —Ç–µ–∫—Å—Ç—É
    const q = searchQuery.trim().toLowerCase();
    if (q) {
      approved = approved.filter(p =>
        (p.title && p.title.toLowerCase().includes(q)) ||
        (p.text && p.text.toLowerCase().includes(q))
      );
    }

    const wallList = document.getElementById('wallList');
    const toggleBtn = document.getElementById('togglePostsBtn');

    // –∫–Ω–æ–ø–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –∏ –ø–æ—Å—Ç–æ–≤ > 8
    if (!q && approved.length > 8) {
      toggleBtn.classList.remove("hidden");
    } else {
      toggleBtn.classList.add("hidden");
    }

    const visiblePosts = (showAll || q) ? approved : approved.slice(0, 8);

    wallList.innerHTML = visiblePosts.map(p => `
      <div class="post-card fade-in" data-index="${p._idx}">
        <p class="post-date"><strong>–î–æ–±–∞–≤–ª–µ–Ω:</strong> ${p.createdAt ? new Date(p.createdAt).toLocaleString() : '‚Äî'}</p>
        ${p.photo ? `<img src="${p.photo}" alt="–§–æ—Ç–æ" class="post-photo-thumb">` : ''}
        <h3 class="post-title">${p.title}</h3>
        <div class="post-preview">${p.text && p.text.length > 150 ? p.text.slice(0,150) + "‚Ä¶" : (p.text || "")}</div>
        <div class="read-more">–ß–∏—Ç–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é ‚¨á</div>
      </div>
    `).join('');

    toggleBtn.textContent = showAll ? "–°–∫—Ä—ã—Ç—å" : "–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ";

    document.querySelectorAll('.post-card').forEach(card => {
      card.addEventListener('click', () => {
        const idx = card.getAttribute('data-index');
        expandPost(idx);
      });
    });
  }

  // –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ / –°–∫—Ä—ã—Ç—å"
  document.getElementById('togglePostsBtn').addEventListener('click', () => {
    showAll = !showAll;
    renderApproved();
  });

  // –¥–æ–±–∞–≤–ª–µ–Ω–æ: –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ–∏—Å–∫–∞
  document.getElementById('searchInput').addEventListener('input', (e) => {
    searchQuery = e.target.value;
    showAll = false; // –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–º –ø–æ–∏—Å–∫–µ –≤—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
    renderApproved();
  });

  function expandPost(index) {
    const p = postsData[index];
    const container = document.getElementById("expandedPost");
    container.innerHTML = `
      <div class="expanded-content">
        <button class="close-btn" onclick="closeExpanded()">‚úñ</button>
        <p class="post-date"><strong>–î–æ–±–∞–≤–ª–µ–Ω:</strong> ${p.createdAt ? new Date(p.createdAt).toLocaleString() : '‚Äî'}</p>
        <p class="post-author"><strong>–î–æ–±–∞–≤–∏–ª:</strong> ${p.fullName || "‚Äî"}</p>
        <h2 class="post-title">${p.title}</h2>
        ${p.photo ? `<img src="${p.photo}" class="expanded-photo">` : ''}
        <div class="expanded-text">${p.text || ""}</div>
        <div id="vk_comments"></div>
      </div>
    `;
    document.getElementById("expandedOverlay").classList.remove("hidden");
      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –í–ö
  // –ò—Å–ø–æ–ª—å–∑—É–π p.id (–∫–æ—Ç–æ—Ä—ã–π —Ç–µ–ø–µ—Ä—å –µ—Å—Ç—å –≤ –±–∞–∑–µ) –∫–∞–∫ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–ª—é—á
  VK.Widgets.Comments("vk_comments", { limit: 10, attach: "*", dark: 1}, p.id);
  }

  function closeExpanded() {
    document.getElementById("expandedOverlay").classList.add("hidden");
  }

  // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ Esc
  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape") closeExpanded();
  });

  // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –∫–∞—Ä—Ç–æ—á–∫–∏
  document.getElementById("expandedOverlay").addEventListener("click", (e) => {
    const post = document.getElementById("expandedPost");
    if (!post.contains(e.target)) {
      closeExpanded();
    }
  });

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã
  document.getElementById("wallForm").addEventListener("submit", async (e) => {
    e.preventDefault();
    const form = document.getElementById("wallForm");

    if (!form.reportValidity()) {
      showToast("‚ö†Ô∏è –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è", "warn");
      return;
    }

    const fullName = document.getElementById("fullName").value.trim();
    const title = document.getElementById("title").value.trim();
    const text = document.getElementById("text").value.trim();
    const photo = document.getElementById("photo").value.trim();

    const newPost = { 
      fullName,
      title,
      text,
      photo,
      status: "pending",
      createdAt: new Date().toISOString(),
      approvedAt: null
    };
    postsData.push(newPost);

    try {
      const res = await fetch(API_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(postsData)
      });
      if (res.ok) {
        showToast("‚úÖ –ó–∞–ø–∏—Å—å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é", "success");
        form.reset();
      } else {
        showToast("‚ùå –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è", "error");
      }
    } catch (err) {
      console.error("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:", err);
      showToast("‚ùå –û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è", "error");
    }
  });

  // Toast (–∫–∞–∫ –≤ —Ç–≤–æ—ë–º –∫–æ–¥–µ)
  function showToast(message, type = "info") {
    const toast = document.getElementById("toast");
    toast.innerHTML = message;
    toast.className = "show";
    setTimeout(() => {
      toast.className = toast.className.replace("show", "");
    }, 3000);
  }

  loadPosts();
  </script>

</section>

<style>
/* –ê–Ω–∏–º–∞—Ü–∏—è –ø–ª–∞–≤–Ω–æ–≥–æ –ø–æ—è–≤–ª–µ–Ω–∏—è */
.post-card.fade-in {
  opacity: 0;
  transform: translateY(10px);
  animation: fadeInUp 0.4s ease forwards;
}
@keyframes fadeInUp {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –±–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –ø–æ–ª—è –ø–æ–∏—Å–∫–∞ 
.wall-search {
  width: 100%;
  max-width: 640px;
  padding: 10px 12px;
  border: 1px solid #ddd;
  border-radius: 8px;
  margin: 8px 0 16px;
  font-size: 16px;
}
  */
.wall-search {
  background-color: #2c2c2c;
  border: 2px solid orange;
  color: orange;
  border-radius: 8px;
  padding: 8px 12px;
  width: 100%;
  box-sizing: border-box;
  margin-bottom: 10px;
  }
</style>









  


  


  
</main>
<div class="footer-bg"></div>
<footer class="site-footer" role="contentinfo">
  <p>–ü—Ä–æ–µ–∫—Ç –∫ –∫–æ–Ω–∫—É—Ä—Å—É ¬´–ü–ê–¢–†–ò–û–¢.by¬ª. –¢–µ–º–∞: ¬´80 —Å—Ç—Ä–∞–Ω–∏—Ü –∏—Å—Ç–æ—Ä–∏–∏ –í–µ–ª–∏–∫–æ–π –ü–æ–±–µ–¥—ã¬ª</p>
  <p>–ì–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ–µ —É—á—Ä–µ–∂–¥–µ–Ω–∏–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è ¬´–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ 55 –≥. –ú–∏–Ω—Å–∫–∞¬ª ¬© 2025</p>
</footer>








  
</body>
</html>





























































































